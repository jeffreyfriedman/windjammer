# Cross-platform stack size configuration

# Windows: Massively increase stack size to handle deep AST Drop chains
# The compiler has deeply nested AST structures that overflow during cleanup
# Try 64MB - if this doesn't work, the problem is structural, not size
[target.x86_64-pc-windows-msvc]
rustflags = ["-C", "link-arg=/STACK:67108864", "-C", "link-arg=/DEBUG"]

[target.x86_64-pc-windows-gnu]
rustflags = ["-C", "link-arg=-Wl,--stack,67108864"]

# Set minimum stack size for worker threads
[env]
RUST_MIN_STACK = "67108864"
